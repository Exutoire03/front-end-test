<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Front-end</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="dashboard-layout">
    <aside class="sidebar">
      <div class="sidebar-top">
        <div class="sidebar-logo-box">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-logo-icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v3.75A2.25 2.25 0 009 9h3.75M17.25 3v3.75A2.25 2.25 0 0115 9h-3.75M6.75 21v-3.75A2.25 2.25 0 019 15h3.75M17.25 21v-3.75A2.25 2.25 0 0115 15h-3.75" />
          </svg>
        </div>
        <nav class="sidebar-nav">
          <ul>
            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 16.5a7.488 7.488 0 00-5.982 2.225M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm6 2.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-2.25 6.75a6.72 6.72 0 012.25-5.25m-13.5 5.25a6.72 6.72 0 00-2.25-5.25" />
                    </svg>
                </a>
            </li>

            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3v18h18" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17V9m4 8V5m4 8v-3" />
                    </svg>
                </a>
            </li>

            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3l8.485 3.03A2.25 2.25 0 0121 8.13v5.25c0 5.25-6.75 7.875-9 8.625-2.25-.75-9-3.375-9-8.625V8.13a2.25 2.25 0 01.515-2.1L12 3z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4" />
                    </svg>
                </a>
            </li>

            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6V4.5a2.25 2.25 0 00-2.25-2.25h-3A2.25 2.25 0 004.5 4.5V19.5A2.25 2.25 0 006.75 21.75h3A2.25 2.25 0 0012 19.5V18m0-12v1.5m0 0v1.5m0-1.5h6.75A2.25 2.25 0 0121 6.75v12A2.25 2.25 0 0118.75 21h-3A2.25 2.25 0 0113.5 18.75V6.75A2.25 2.25 0 0115.75 4.5h3A2.25 2.25 0 0121 6.75v12A2.25 2.25 0 0118.75 21h-3A2.25 2.25 0 0113.5 18.75V6.75z" />
                    </svg>
                </a>
            </li>

            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                </a>
            </li>
          </ul>
        </nav>
      </div>

        <div class="sidebar-bottom">
            <div class="sidebar-notif">
            
            <div class="notif-badge">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="sidebar-icon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.657A2.25 2.25 0 0112 19.5a2.25 2.25 0 01-2.857-1.843M6 8.25V6a6 6 0 1112 0v2.25a6.003 6.003 0 01-1.5 3.975v2.025a2.25 2.25 0 01-2.25 2.25h-3a2.25 2.25 0 01-2.25-2.25V12.225A6.003 6.003 0 016 8.25z" />
                </svg>
                <span class="notif-dot"></span>
            </div>
            </div>
            <div class="sidebar-avatar">
            <!-- Avatar rond (image ou initiales) -->
            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Avatar" />
            </div>
        </div>
    </aside>

    
    <main class="main-content">
      <div class="main-columns">
        <div class="main-inner">
          <h2 class="main-title">Comptes</h2>
          <nav class="main-menu">
            <ul>
              <li class="active">
                <a href="#">
                  Dashboard
                  <span class="chevron">&gt;</span>
                </a>
              </li>
              <li><a href="#">Sections <span class="chevron">&gt;</span></a></li>
              <li><a href="#">Catégories <span class="chevron">&gt;</span></a></li>
              <li><a href="#">Labels <span class="chevron">&gt;</span></a></li>
              <li><a href="#">Rôles <span class="chevron">&gt;</span></a></li>
            </ul>
          </nav>
          <div class="main-bottom stick-bottom">
            <button class="main-btn">Ajouter un utilisateur</button>
          </div>
        </div>


        <section class="users-section">
          <div class="users-header-top">
            <h2 class="users-title">Users List</h2>
            <nav class="breadcrumb">
              <span>Home</span> /
              <span>User management</span> /
              <span class="active">Users List</span>
            </nav>
          </div>

          <div class="users-header">
                <div class="search-box">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" /></svg>
                <input type="text" placeholder="Search user" />
                </div>
                <button class="users-add-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="add-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                Ajouter utilisateur
                </button>
          </div>

          <div class="users-table-wrapper">
            <table id="users-table" class="users-table">
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Email</th>
                  <th>Genre</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <!-- Les utilisateurs seront injectés ici -->
              </tbody>
            </table>
            <div class="pagination" style="margin-top: 16px; text-align: center;"></div>
          </div>
        </section>
      </div>
    </main>
  </div>

<!-- Modale d'ajout utilisateur -->
<div id="addUserModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h3>Ajouter un utilisateur</h3>
    <form id="addUserForm">
      <label>Nom<br><input type="text" name="name" required></label><br>
      <label>Email<br><input type="email" name="email" required></label><br>
      <label>Genre<br>
        <select name="gender" required>
          <option value="male">Homme</option>
          <option value="female">Femme</option>
        </select>
      </label><br>
      <label>Status<br>
        <select name="status" required>
          <option value="active">Actif</option>
          <option value="inactive">Inactif</option>
        </select>
      </label><br>
      <button type="submit" class="users-add-btn" style="margin-top:12px;">Ajouter</button>
    </form>
    <div id="addUserError" style="color:#ff4d6d; margin-top:8px;"></div>
  </div>
</div>
</body>
</html>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
const USERS_PER_PAGE = 10;
const TOTAL_USERS = 500;
const TOTAL_PAGES = Math.ceil(TOTAL_USERS / USERS_PER_PAGE);

function loadUsers(page = 1) {
  $.get(`https://gorest.co.in/public/v2/users?page=${page}&per_page=${USERS_PER_PAGE}`, function(users) {
    let rows = '';
    users.forEach(user => {
      rows += `
        <tr>
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td>${user.gender}</td>
          <td>${user.status}</td>
        </tr>
      `;
    });
    $('#users-table tbody').html(rows);
    $('.pagination .page-btn').removeClass('active');
    $(`.pagination .page-btn[data-page=${page}]`).addClass('active');
  });
}

$(document).ready(function() {
  
  let pagBtns = '';
  for(let i=1; i<=TOTAL_PAGES; i++) {
    pagBtns += `<button class="page-btn" data-page="${i}">${i}</button>`;
  }
  $('.pagination').html(`
    <button id="prev-btn">Précédent</button>
    ${pagBtns}
    <button id="next-btn">Suivant</button>
  `);

  let currentPage = 1;
  loadUsers(currentPage);

  // Recherche dynamique sur la page courante
  $(document).on('input', '.search-box input', function() {
    const search = $(this).val().toLowerCase();
    $('#users-table tbody tr').each(function() {
      const name = $(this).find('td').eq(0).text().toLowerCase();
      const email = $(this).find('td').eq(1).text().toLowerCase();
      if(name.includes(search) || email.includes(search)) {
        $(this).show();
      } else {
        $(this).hide();
      }
    });
  });

  $('.pagination').on('click', '.page-btn', function() {
    currentPage = parseInt($(this).data('page'));
    loadUsers(currentPage);
  });
  $('#prev-btn').click(function() {
    if(currentPage > 1) {
      currentPage--;
      loadUsers(currentPage);
    }
  });
  $('#next-btn').click(function() {
    if(currentPage < TOTAL_PAGES) {
      currentPage++;
      loadUsers(currentPage);
    }
  });
});

// Gestion modale ajout utilisateur
$(function() {
  
  $('.users-add-btn').click(function(e) {
    if($(this).closest('#addUserForm').length === 0) {
      $('#addUserModal').fadeIn(150);
      $('#addUserForm')[0].reset();
      $('#addUserError').text('');
    }
  });
  
  $('.close-modal').click(function() {
    $('#addUserModal').fadeOut(150);
  });
  $(window).on('click', function(e) {
    if($(e.target).is('#addUserModal')) $('#addUserModal').fadeOut(150);
  });
  
  // Soumission du formulaire
  $('#addUserForm').submit(function(e) {
    e.preventDefault();
    var data = {
      name: this.name.value,
      email: this.email.value,
      gender: this.gender.value,
      status: this.status.value
    };

    var token = '95b2b50b94fe3b46ae16f7b8c757399bcb18cf68dde0bb6ae4f3371489b51362'; 
    $.ajax({
      url: 'https://gorest.co.in/public/v2/users',
      method: 'POST',
      headers: { 'Authorization': 'Bearer ' + token },
      contentType: 'application/json',
      data: JSON.stringify(data),
      success: function(user) {
        var row = `<tr><td>${user.name}</td><td>${user.email}</td><td>${user.gender}</td><td>${user.status}</td></tr>`;
        $('#users-table tbody').prepend(row);
        $('#addUserModal').fadeOut(150);
      },
      error: function(xhr) {
        var msg = 'Erreur lors de l\'ajout.';
        if(xhr.responseJSON && xhr.responseJSON[0] && xhr.responseJSON[0].message) {
          msg = xhr.responseJSON[0].message;
        }
        $('#addUserError').text(msg);
      }
    });
  });
});
</script>